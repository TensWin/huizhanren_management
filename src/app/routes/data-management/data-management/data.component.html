<h1>数据管理</h1>
<nz-card>
  <ng-template #body>
    <form nz-form [formGroup]="phoneSearch" (ngSubmit)="search()">
      <div nz-row nz-form-item>
        <div nz-form-label nz-col [nzSm]="2">
          <label>手机精确查询</label>
        </div>
        <div nz-form-control nz-col [nzSm]="5">
          <nz-input formControlName="phone"></nz-input>
        </div>
        <div nz-col [nzSm]="6" [nzOffset]="4">
          <button nz-button [nzType]="'primary'" type="submit">查询</button>
          <button nz-button type="reset">清空</button>
        </div> 
      </div>
    </form>
  </ng-template> 
</nz-card>
<nz-card>
  <ng-template #body>
    <nz-table #nzTable [nzAjaxData]="Audience$" [nzPageSize]="10">
      <thead nz-thead>
      <tr>
        <th nz-th><span>观众编号</span></th>
        <th nz-th><span>手机号码</span></th>
        <th nz-th><span>停留展商</span></th>
      </tr>
      </thead>
      <tbody nz-tbody>
      <tr nz-tbody-tr *ngFor="let data of Audience$ | async;let id = index">
        <td nz-td>{{id+1}}</td>
        <td nz-td>{{data.tel}}</td>
        <td nz-td>{{data.companies[0]}}
          <span nz-table-divider></span>
          <a (click)="viewMore()" *ngIf="data.companies.length>1;else elseBlock"><span>查看全部</span></a>
          <ng-template #elseBlock>
            <span style="cursor:not-allowed;color:darkgray;user-select:none;">查看全部</span>
          </ng-template>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </ng-template>
</nz-card>

